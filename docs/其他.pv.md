# Linux 文本处理三剑客，指的是 grep、awk 和 sed。掌握常见用法，就能大大提高开发效率

# git 跟踪分支和变基
将本地的 main 分支改成跟踪 upstream/main：
```
$ git fetch upstream
$ git branch --set-upstream-to=upstream/main main
```
一旦设置了跟踪分支，一定要变基（rebase）你的 main 分支，使它与上游仓库的任何新变化保持一致：
```
$ git remote update
$ git checkout main
$ git rebase
```

# 在使用 grpcurl 时，通过 -plaintext 参数忽略 tls 证书的验证过程

# go mod edit -replace=google.golang.org/grpc=github.com/grpc/grpc-go@latest

# URL 参数

路径参数有两个特殊符号":"和"*"

- ":" 跟在"/"后面为参数的key，匹配两个/中间的值 或 一个/到结尾(其中不再包含/)的值
- "*" 跟在"/"后面为参数的key，匹配从 /*开始到结尾的所有值，所有*必须写在最后且无法多个

GET("/param1/:name", pathParam)
可以拿到一个key为name的参数。注意只能匹配到/param1/felix，无法匹配/param1/felix/hao(该路径会404)

GET("/param2/:name/:value/:felid", pathParam)
可以拿到多个key参数。注意只能匹配到/param2/felix/hao/love，无法匹配/param2/felix或/param2/felix/hao

GET("/param3/:name/*action", pathParam)
可以拿到一个key为name的参数 和 一个key为action的路径。
如/params3/felix/hello，action的值为"/hello"
如/params3/felix/hello/hi，action的值为"/hello/hi"
如/params3/felix/hello/hi/，action的值为"/hello/hi/"

# swagger.json文件，可用于swagger工具通过WEBUI的方式打开使用

# attach 已过时，可用: docker exec -it containerID /bin/bash

# bash 工具

sed
```
//大写改成小写
sed -i 's/[A-Z]/\l&/g'

//复杂的字符串 ("Int64(\"user_id\", user.Uid).")，
//先用 grep 测试是否可以搜索到(检测特殊字符串是否转义)，
//再用 sed 操作
grep -r "Int64(\"user_id\", user.Uid)." 
sed -i 's/Int64(\"user_id\", user.Uid).//g' $(grep -rl "user_id")

```

grep
```
grep -r "xxx" --exclude-dir={ .git,tools/env } // "tools/env" 被识别成目录，不是预期的结果
grep -r "xxx" --exclude-dir={ .git,env } // "env" 被识别成目录，是预期的结果
```

> Grep uses regex, but this looks like a glob.
# go error

下面等价
- err := errors.New("new err")
- err := fmt.Errorf("new err")

# 确保程序的正确性

- 测试
- 静态分析

# git commit test\chore

test 包含 ut\bt\it 和 tests 目录下
chore 包含 build(makefile)\cicd(workflow)\tools\git-hook\...

# git reset\git checkout -- .

git reset 从 history 区重置 cached 区
git checkout -- . 从 cached 区重置 work 区

# git 批量处理改动的文件

1, 列出改动的文件
git st | awk '{ print $2 }'

2, grep 关注的文件
git st | awk '{ print $2 }' | grep _test.go