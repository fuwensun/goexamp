apiVersion: apps/v1
kind: Deployment
metadata:
  name: user-deploy
  namespace: ek8sv1
  labels:
    svc: user-deploy
spec:
  replicas: 1
  selector:
    matchLabels:
      app: user  #选择 pod label
  template:
    metadata:
      labels:
        app: user #标注 pod label
    spec:
      containers:
      - name: user
        image: goms-etest:latest
        imagePullPolicy: IfNotPresent
        command: ["./eTest","-cfgpath=./configs/k8s"]
        ports:
        - containerPort: 8080
        # env:
        # - name: REDIS_SVC_ADDR 
        #   value: 'redis-svc:6379'
        # - name: MYSQL_SVC_DSN
        #   value: "utest:pwtest@tcp(mysql-svc:3306)/test_db?timeout=1s&readTimeout=1s&writeTimeout=1s&parseTime=true&loc=Local&charset=utf8mb4,utf8"