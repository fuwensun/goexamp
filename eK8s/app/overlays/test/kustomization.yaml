apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
# namePrefix: test-
commonLabels:
  # app: goms # 重要，要和base中的一致，不然会被 argo-cd/istio 识别成2个 app
  variant: test
commonAnnotations:
    note: ==> goms test run ...
bases:
- ../../base

resources:
- namespace/test-ns.yaml
- client/client-deploy.yaml
- other/user-deploy-v2.yaml

configMapGenerator:
- name: cm-user
  files:
  - configs/app.yaml
  - configs/grpc.yaml
  - configs/http.yaml
  - configs/mysql.yaml
  - configs/redis.yaml

patchesStrategicMerge:
  - patch/user-deploy-v1.yaml

